# Most of Polygon Chainlink USD Oracle update every 10 seconds. So hardcode minimum 1 hour price stale is too high

Polygon chainlink Oracle is unique that it have 30s price update with 0% deviation threshold for all $USD price feeds.
Noya oracle convert all token directly to USD. So it most likely use these oracles for price feed.

The problem is minimum price stale that Admin can set is 1 hour. Which is too long for this kind of oracle.

## Impact

It is not possible to set price stale time to 1 minutes. Vault oracle might prefer aggregators with fast price interval update.

Noya should be able to reject price feed from oracle with 0% deviation threshold that fail to update after 1 minutes.

## Proof of Concept

Project chainlink Oracle use minimum 1 hour stale for price age. It cannot be set any lower

```solidity
    function updateChainlinkPriceAgeThreshold(uint256 _chainlinkPriceAgeThreshold) external onlyMaintainer {
        if (_chainlinkPriceAgeThreshold <= 1 hours || _chainlinkPriceAgeThreshold >= 10 days) {//@audit 
            revert NoyaChainlinkOracle_INVALID_INPUT();
        }
        chainlinkPriceAgeThreshold = _chainlinkPriceAgeThreshold;
        emit ChainlinkPriceAgeThresholdUpdated(_chainlinkPriceAgeThreshold);
    }
```

If you look at some Polygon L2 oracle, they update exactly every 2-5 blocks or 4-10 seconds. Like this ETH/USD feeds.
<https://polygonscan.com/address/0x4dD6655Ad5ed7C06c882f496E3f42acE5766cb89>

It is reasonable for project to prefer these kind of oracle for faster price update.
So minimum 1 hour price cutoff is simply just too far for these oracle.

## Tools Used

<https://github.com/code-423n4/2024-04-noya/blob/9c79b332eff82011dcfa1e8fd51bad805159d758/contracts/helpers/valueOracle/oracles/ChainlinkOracleConnector.sol#L57>

## Recommended Mitigation Steps

```solidity
    function updateChainlinkPriceAgeThreshold(uint256 _chainlinkPriceAgeThreshold) external onlyMaintainer {
        if (_chainlinkPriceAgeThreshold <= 1 minutes || _chainlinkPriceAgeThreshold >= 10 days) {//@audit use 1 minutes as cut off
            revert NoyaChainlinkOracle_INVALID_INPUT();
        }
        ...
    }
```
