# `ChainlinkOracleConnector` no decimal conversion

`ChainlinkOracleConnector.getValueFromChainlinkFeed()` do not read ChainlinkAggregator decimals nor do decimal conversion between 2 tokens.
Resulting in oracle return wrong value.

## Impact

Oracle get value always wrong for some assets pair like WETH to USDC.

## Proof of Concept

Below is how `ChainlinkOracleConnector` use price from Chainlink Aggregator.

```solidity
    function getValueFromChainlinkFeed(
        AggregatorV3Interface source,//getSourceOfAsset(asset, baseToken) return Chainlink Aggregator
        uint256 amountIn,
        uint256 sourceTokenUnit,// isInverse ? getTokenDecimals(baseToken) : getTokenDecimals(asset)
        bool isInverse//getSourceOfAsset(asset, baseToken)
    ) public view returns (uint256) {
        int256 price;
        uint256 updatedAt;
        (, price,, updatedAt,) = source.latestRoundData();//@could be 1e18 decimals
        uint256 uintprice = uint256(price);
        if (block.timestamp - updatedAt > chainlinkPriceAgeThreshold) {
            revert NoyaChainlinkOracle_DATA_OUT_OF_DATE();
        }
        if (price <= 0) {
            revert NoyaChainlinkOracle_PRICE_ORACLE_UNAVAILABLE(address(source), address(0), address(0));
        }
        if (isInverse) {
            return (amountIn * sourceTokenUnit) / uintprice;
        }
        return (amountIn * uintprice) / (sourceTokenUnit);//@audit H chainlink oracle did not convert price correctly for all types of oracle. This ignore oracle feed 6 or 8 decimals
    }
    function getTokenDecimals(address token) public view returns (uint256) {
        uint256 decimals = IERC20Metadata(token).decimals();
        return 10 ** decimals;
    }
```

`ChainlinkOracleConnector.getValueFromChainlinkFeed()` is called from `NoyaValueOracle`.
<https://github.com/code-423n4/2024-04-noya/blob/9c79b332eff82011dcfa1e8fd51bad805159d758/contracts/helpers/valueOracle/NoyaValueOracle.sol#L89>
`NoyaValueOracle` expect all child oracles to convert input assetToken into baseToken. Similar to [how UniswapValueOracle return swap value here](https://github.com/code-423n4/2024-04-noya/blob/9c79b332eff82011dcfa1e8fd51bad805159d758/contracts/helpers/valueOracle/oracles/UniswapValueOracle.sol#L85).

For example, 1e18 WETH would return 3000e6 USDC.
Because there is no decimal conversion taking place. Above Oracle code will just return all token value with 8 decimals.

Ex: Input 1e18 WETH, OracleFeed = WETH_USDC,sourceTokenUnit = WETH decimal= 10**18,isInverse = false.

You get `amount = (amountIn * uintprice) / (sourceTokenUnit) = 1e18 * 3000e8 / 1e18 = 3000e8`. The expected value should be `3000e6`.

## Tools Used

<https://github.com/code-423n4/2024-04-noya/blob/9c79b332eff82011dcfa1e8fd51bad805159d758/contracts/helpers/valueOracle/oracles/ChainlinkOracleConnector.sol#L115-L135>

## Recommended Mitigation Steps
