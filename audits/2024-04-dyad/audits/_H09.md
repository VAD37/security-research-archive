# $KEROSENE is undervalued. Decimal typo in `Vault.kerosine.unbounded.sol`

The current Uniswap V2, V3 price for Kerosene hover around 1 KEROSENE = 0.03 USD

Using the same formular describe in [project docs](https://dyadstable.notion.site/KEROSENE-Equations-Final-8655c83e0b7d44f883b9a99f499866c3).
With MAINNET condition, we also get the same result. 1 KEROSENE ~= 0.035 USD

But current project implementation, it return `1e18 KEROSENE = 3.444791e6 USD` with 8 decimals.
In reality, it should be `1e18 KEROSENE ~= 3.4e16 USD` with 18 decimals.

## Impact

$KEROSENE is heavily undervalued and there no post fix with 50,000,000e18 KEROSENE in circulation.

There is 400,000$ in liquidity on uniswap KEROSENE/WETH. Users holding KEROSENE token will see their value drop 1e10 (10,000,000,000) times.
So this issue is High.

## Proof of Concept

Here is simplified Kerosene price calculation:
`Price = (Total Deposit Value in USD - DYAD Debt) / Kerosene in circulation`
Current Kerosene in circulation is 50,000,000e18 token
TVL is ~2,000,000 USD from V1 `VaultManager`
DYAD debt is ~600,000 USD
Price ~= 0.028 USD (UniswapV2 price hover around 0.03 USD)
<https://v2.info.uniswap.org/pair/0x34a43471377dcce420ce8e3ffd9360b2e08fa7b4>

Running this script will show price return 3.444791e6 USD

```solidity
// SPDX-License-Identifier: MIT
pragma solidity =0.8.17;

import "forge-std/console.sol";
import "forge-std/Test.sol";

import "../../script/deploy/Deploy.V2.s.sol";
import { Licenser } from "../../src/core/Licenser.sol";
import { Parameters } from "../../src/params/Parameters.sol";


contract V2Test is Test, Parameters {
  Contracts contracts;

  function setUp() public {
    contracts = new DeployV2().run();
    vm.startPrank(MAINNET_OWNER);
    //include boundedKerosineVault
    contracts.vaultLicenser.add(address(contracts.boundedKerosineVault));
    // Add vaultManagerV2 to v1 licenser so it can mint DYAD
    Licenser(MAINNET_VAULT_MANAGER_LICENSER).add(address(contracts.vaultManager));
    vm.stopPrank();
  }

  function testKEROSENE() public {
    vm.startPrank(MAINNET_OWNER);
    //include V1 vaults into keroseneManager so it calcualte TVL correctly.
    contracts.kerosineManager.add(address(MAINNET_WETH_VAULT));
    contracts.kerosineManager.add(address(MAINNET_WSTETH_VAULT));
    vm.stopPrank();

    console.log("denominator %e", contracts.kerosineDenominator.denominator());//
    console.log("ethVaultPrice %e", contracts.ethVault.assetPrice());//3.2472e11
    console.log("wstEthPrice %e", contracts.wstEth.assetPrice());//3.79132877826e11

    console.log("unboundedAssetPrice %e", contracts.unboundedKerosineVault.assetPrice());//@3.462469e6
    console.log("boundedAssetPrice %e", contracts.boundedKerosineVault.assetPrice());

    vm.stopPrank();
  }

}
```

## Tools Used

<https://github.com/code-423n4/2024-04-dyad/blob/49fb7174576e5147dc73d3222d16954aa641a2e0/src/core/Vault.kerosine.unbounded.sol#L67>

## Recommended Mitigation Steps

use 1e18 will return correct price.

```solidity
//src\core\Vault.kerosine.unbounded.sol
  function assetPrice() //1 eth = 98,000 KERO = 3.24k USD or 1 USD = 28.6 KERO or 28.6e18 KERO = 1e18 USD/DYAD
    public 
    view 
    override
    returns (uint) {
      uint tvl;
      address[] memory vaults = kerosineManager.getVaults();
      uint numberOfVaults = vaults.length;
      for (uint i = 0; i < numberOfVaults; i++) {
        Vault vault = Vault(vaults[i]);
        tvl += vault.asset().balanceOf(address(vault)) 
                * vault.assetPrice() * 1e18
                / (10**vault.asset().decimals()) 
                / (10**vault.oracle().decimals());
      }
      uint numerator   = tvl - dyad.totalSupply();//2,335,049e18 - 632,967e18 DYAD     @DYAD supply can be minted by using KEROSINE as collateral.
      uint denominator = kerosineDenominator.denominator();//4.915e25  =kerosine.totalSupply() - kerosine.balanceOf(MAINNET_OWNER)      
---      return numerator * 1e8 / denominator;//3,462,469 or 3.4e6   @ denominator ~= 50M or 49,000,000e18 = 4.915e25 //@ best uniswap reduce 20% value of denominator value
+++      return numerator * 1e18 / denominator;
  }
```
