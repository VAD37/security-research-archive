
# `LoansNFT.forecloseLoan()` Reverts if Underlying Token Has a Blacklist (e.g., USDC, USDT)

## Summary

If the Collar protocol uses USDC as the underlying token instead of a cash asset, `forecloseLoan()` may revert when the borrower transfers their loan NFT to a blacklisted account. This prevents Escrowers from closing loans to claim late fees, forcing them to forgo late fees and cancel the loan.

## Finding Description

On networks like Arbitrum and Optimism, centralized tokens like USDC include a blacklist feature. If a borrower transfers their loan NFT to a blacklisted account, `forecloseLoan()` will revert due to the blacklist check.  
Escrowers are then limited to calling `EscrowSupplierNFT.lastResortSeizeEscrow()` to retrieve their locked escrow but lose the late fee penalty.

---

## Impact Explanation

**Severity: Low**  
This issue is unlikely to occur because Escrow is optional and access to blacklisted accounts is limited.

---

## Likelihood Explanation

**Unlikely**  
USDC is not currently documented to used as the underlying asset in the Collar protocol.
While possible, using USDC as an underlying asset is improbable.

---

## Proof of Concept

Revert occurs here:  
[LoansNFT.sol#L424](https://github.com/CollarNetworks/protocol-core/blob/3eadf114e72ff49b3096c221f0d8d31951a38292/src/LoansNFT.sol#L424)  

Steps to reproduce:  

1. The borrower transfers their loan NFT to a blacklisted account.  
2. Any transfer calls to the borrower will fail because the new NFT owner is blacklisted.  
3. Escrowers are forced to use `lastResortSeizeEscrow()` to recover funds:  
[EscrowSupplierNFT.sol#L397-L409](https://github.com/CollarNetworks/protocol-core/blob/3eadf114e72ff49b3096c221f0d8d31951a38292/src/EscrowSupplierNFT.sol#L397-L409).

---

## Recommendation

None.
